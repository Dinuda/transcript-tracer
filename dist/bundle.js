!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("TranscriptTracer",[],e):"object"==typeof exports?exports.TranscriptTracer=e():t.TranscriptTracer=e()}(self,(()=>(()=>{"use strict";var t={379:(t,e,r)=>{r.d(e,{A:()=>s});var n=r(601),o=r.n(n),a=r(314),c=r.n(a)()(o());c.push([t.id,"/* src/assets/styles.css */\n.tt-transcript {\n  font-family: Arial, sans-serif;\n  font-size: 16px;\n  line-height: 1.5;\n}\n\n.tt-word {\n  cursor: pointer;\n  background-color: transparent;\n  transition: background-color 0.3s ease;\n}\n\n.tt-word:hover {\n  background-color: #f0f0f0;\n}\n\n.tt-current-word {\n  background-color: #ffeb3b;\n}\n\n.tt-previous-word {\n  color: gray;\n}\n\n.tt-current-block-container,\n.tt-current-phrase-container {\n  background-color: rgba(255, 235, 59, 0.3);\n}\n",""]);const s=c},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(t,r,n,o,a){"string"==typeof t&&(t=[[null,t,void 0]]);var c={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(c[l]=!0)}for(var d=0;d<t.length;d++){var i=[].concat(t[d]);n&&c[i[0]]||(void 0!==a&&(void 0===i[5]||(i[1]="@layer".concat(i[5].length>0?" ".concat(i[5]):""," {").concat(i[1],"}")),i[5]=a),r&&(i[2]?(i[1]="@media ".concat(i[2]," {").concat(i[1],"}"),i[2]=r):i[2]=r),o&&(i[4]?(i[1]="@supports (".concat(i[4],") {").concat(i[1],"}"),i[4]=o):i[4]="".concat(o)),e.push(i))}},e}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var a={},c=[],s=0;s<t.length;s++){var l=t[s],d=n.base?l[0]+n.base:l[0],i=a[d]||0,u="".concat(d," ").concat(i);a[d]=i+1;var f=r(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)e[f].references++,e[f].updater(p);else{var v=o(p,n);n.byIndex=s,e.splice(s,0,{identifier:u,updater:v,references:1})}c.push(u)}return c}function o(t,e){var r=e.domAPI(e);return r.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,o){var a=n(t=t||[],o=o||{});return function(t){t=t||[];for(var c=0;c<a.length;c++){var s=r(a[c]);e[s].references--}for(var l=n(t,o),d=0;d<a.length;d++){var i=r(a[d]);0===e[i].references&&(e[i].updater(),e.splice(i,1))}a=l}}},659:t=>{var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,r)=>{t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var a=r.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={id:n,exports:{}};return t[n](a,a.exports,r),a.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nc=void 0;var n={};r.r(n),r.d(n,{cleanupTranscriptTracer:()=>M,loadTranscriptTracer:()=>C});var o=r(72),a=r.n(o),c=r(825),s=r.n(c),l=r(659),d=r.n(l),i=r(56),u=r.n(i),f=r(540),p=r.n(f),v=r(113),m=r.n(v),h=r(379),y={};y.styleTagTransform=m(),y.setAttributes=u(),y.insert=d().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=p(),a()(h.A,y),h.A&&h.A.locals&&h.A.locals;let g,b,x,S=!1,k={},T=null,E=null,w=0,A=0,L=null,I=!1,q=!1;function M(){S&&(null==b||b.forEach((t=>{t.removeEventListener("play",U),t.removeEventListener("ended",P),t.removeEventListener("timeupdate",N)})),I&&document.querySelectorAll(".tt-word").forEach((t=>{t.removeEventListener("click",O)})),S=!1,g=null,b=null,x=null,k={},document.querySelectorAll(".tt-transcript").forEach((t=>{!function(t){j(t);var e=t.querySelectorAll("[data-tt-word]");for(const t of e)t.dataset.ttWord="",t.dataset.ttPhrase="",t.dataset.ttBlock="";var r=t.dataset.ttCurrentMediaUrl;r&&(delete k[r],t.dataset.ttCurrentMediaUrl="");for(const t of document.querySelectorAll(".tt-word"))t.removeEventListener("click",O)}(t),t.dataset.ttTranscript=""})),document.querySelectorAll(".tt-word, .tt-whitespace").forEach((t=>{t.outerHTML=t.innerHTML})),T=E=L=null,w=A=0,I=!1)}function C(t=null,e){"loading"!==document.readyState?e&&(M(),t&&Object.assign(this,t),S=!0,g=document.getElementsByClassName("tt-transcript"),b=document.querySelectorAll("audio"),b.length||setTimeout((()=>{b=document.querySelectorAll("audio"),b.length}),1e3),Array.from(g).forEach(((t,e)=>{t.dataset.ttMediaUrls&&(t.dataset.ttTranscript=e.toString(),function(t){const e=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),r=[];let n;for(;n=e.nextNode();)r.push(n);r.forEach((t=>{if(t.textContent.trim()){const e=document.createDocumentFragment();t.textContent.split(/(\s+)/).forEach((t=>{const r=document.createElement("span");r.textContent=t,r.className=t.trim()?"tt-word":"tt-whitespace",e.appendChild(r)})),t.parentNode.replaceChild(e,t)}}))}(t))})),function(t){b.forEach((e=>{!function(t,e){var r,n=t.querySelector('track[kind="metadata"]'),o=[],a=t.getAttribute("src"),c=t.querySelectorAll("source");if(a&&o.push(a),c)for(const t of c)o.push(t.src);if(n&&n.getAttribute("src")&&0!=o.length)for(let n=0;n<g.length;n++){const a=g[n];for(const n of o)if(null===(r=a.dataset.ttMediaUrls)||void 0===r?void 0:r.includes(n)){t.dataset.ttLinkedMediaUrl=n,s(t,e,a);break}}function s(t,e,r){var n,o,a,c,s,l,d=function(t){const e=t.trim().split("\n"),r=[],n=/(\d{2}:\d{2}:\d{2}\.\d{3}) --> (\d{2}:\d{2}:\d{2}\.\d{3})\s*(.*)/;for(let t=0;t<e.length;t++){const o=n.exec(e[t]);if(o){const[a,c,s]=o;let l="";for(t++;t<e.length&&!n.test(e[t]);)l+=e[t].trim()+" ",t++;t--,r.push({text:l.trim().replace(/[,.:;?!]$/,""),startSeconds:$(c),endSeconds:$(s),wordIndex:r.length,phraseIndex:0,blockIndex:0})}}return r}(e);if(0!==d.length){r.dataset.ttCurrentMediaUrl=t.dataset.ttLinkedMediaUrl;var i=T?r.querySelectorAll(T):[];for(let t=0;t<i.length;t++)i[t].dataset.ttBlock=t;var u=E?r.querySelectorAll(E):[];for(let t=0;t<u.length;t++)u[t].dataset.ttPhrase=t;var f=[],p=0,v=r.getElementsByClassName("tt-word");for(let t=0;t<v.length;t++){var m=v[t],h=p,y=Math.min(p+w,d.length-1);if(void 0===d[p])break;for(;M(m.innerText)!=M(d[p].text)&&p<y;)p+=1;if(M(m.innerText)==M(d[p].text)){var g=T?null!==(a=null===(o=null===(n=m.closest(T))||void 0===n?void 0:n.dataset)||void 0===o?void 0:o.ttBlock)&&void 0!==a?a:null:d[p].blockIndex,b=E?null!==(l=null===(s=null===(c=m.closest(E))||void 0===c?void 0:c.dataset)||void 0===s?void 0:s.ttPhrase)&&void 0!==l?l:null:d[p].phraseIndex,x=d[p].wordIndex;m.dataset.ttBlock=g,m.dataset.ttPhrase=b,m.dataset.ttWord=x,0!=f.length&&d[p].startSeconds==f[f.length-1].seconds?f[f.length-1].currentWordIndexes.push(x):f.push({seconds:d[p].startSeconds,currentWordIndexes:[x],phraseIndex:b,blockIndex:g}),p+=1}else p=h}if(!T){var S=d[d.length-1].blockIndex+1;for(let t=0;t<S;t++){var A=C(document.querySelector(`[data-tt-block="${t}"]`),r,"[data-tt-word]",`[data-tt-word][data-tt-block="${t}"]`);A&&(A.dataset.ttBlock=t)}}if(!E){S=d[d.length-1].phraseIndex+1;for(let t=0;t<S;t++){var L=C(document.querySelector(`[data-tt-phrase="${t}"]`),r,"[data-tt-word]",`[data-tt-word][data-tt-phrase="${t}"]`);L&&(L.dataset.ttPhrase=t)}}f=f.sort((function(t,e){return t.seconds-e.seconds}));var q=parseInt(r.dataset.ttTranscript);if(k[t.dataset.ttLinkedMediaUrl]={transcriptIndex:q,wordTimings:d,timedEvents:f,mediaElement:t,textTrackData:t.textTracks[0]},I)for(let t=0;t<document.querySelectorAll(".tt-word").length;t++)document.querySelectorAll(".tt-word")[t].addEventListener("click",O)}function M(t){return t.toLowerCase().normalize("NFD").replace(/\p{P}/gu,"").replace(/\s+/g,"")}function C(t,e,r,n){for(var o=t;o&&o!=e;){var a=(o=o.parentElement).querySelectorAll(r),c=document.querySelectorAll(n);if(a.length==c.length)return o;if(a.length>c.length)break}return null}}}(e,t),e.addEventListener("play",U),e.addEventListener("ended",P)}))}(e),q=!0):document.addEventListener("DOMContentLoaded",(()=>C(t,e)))}function U(t){if(!q)return t.preventDefault(),void t.currentTarget.pause();x!==t.currentTarget&&(x&&(x.removeEventListener("timeupdate",N),x.pause()),x=t.currentTarget,j(document.querySelector(".tt-transcript")));const e=t.currentTarget.dataset.ttLinkedMediaUrl;e&&k[e]&&(g[k[e].transcriptIndex].dataset.ttCurrentMediaUrl=e),x.addEventListener("timeupdate",N)}function P(){j(document.querySelector(".tt-transcript"))}function N(t){if(!x||t.currentTarget!==x)return;const e=x.dataset.ttLinkedMediaUrl;if(!e||!k[e])return;const r=k[e];if(0===r.timedEvents.length)return;const n=x.currentTime-A,o=document.querySelector(`[data-tt-transcript="${r.transcriptIndex}"]`);j(o);const a=r.timedEvents.find(((t,e)=>t.seconds<=n&&(!r.timedEvents[e+1]||n<r.timedEvents[e+1].seconds)));a&&(function(t,e){if(!e)return;null!=t.blockIndex&&e.querySelectorAll(`[data-tt-block="${t.blockIndex}"]`).forEach(((t,e)=>t.classList.add(0!==e||t.classList.contains("tt-word")?"tt-current-block":"tt-current-block-container"))),null!=t.phraseIndex&&e.querySelectorAll(`[data-tt-phrase="${t.phraseIndex}"]`).forEach(((t,e)=>t.classList.add(0!==e||t.classList.contains("tt-word")?"tt-current-phrase":"tt-current-phrase-container"))),t.currentWordIndexes.forEach((t=>{e.querySelectorAll(`[data-tt-word="${t}"]`).forEach((t=>t.classList.add("tt-current-word")))}));let r=!0;e.querySelectorAll(".tt-word").forEach((t=>{t.classList.contains("tt-current-word")?r=!1:r&&t.classList.add("tt-previous-word")}))}(a,o),function(){if(!L)return;let t=null;"block"===L?t=document.querySelector(".tt-current-block-container"):"phrase"===L?t=document.querySelector(".tt-current-phrase-container"):"word"===L&&(t=document.querySelector(".tt-current-word")),null==t||t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}())}function j(t){t&&t.querySelectorAll('[class*="tt-current"], [class*="tt-previous"]').forEach((t=>{t.classList.remove("tt-current-block","tt-current-block-container","tt-current-phrase","tt-current-phrase-container","tt-current-word","tt-previous-word")}))}function O(t){const e=t.currentTarget,r=e.dataset.ttWord,n=e.closest(".tt-transcript").dataset.ttCurrentMediaUrl;if(n&&r){const t=k[n].wordTimings[r].startSeconds;k[n].mediaElement.currentTime=t}}function $(t){const[e,r,n]=t.split(":");return 3600*parseInt(e,10)+60*parseInt(r,10)+parseFloat(n)}return n})()));